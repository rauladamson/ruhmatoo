package ical;

import org.json.JSONObject;
import org.junit.jupiter.api.Disabled;
import org.junit.jupiter.api.Test;
import servlet.CalendarDataServlet;

import java.util.HashMap;

import static org.junit.jupiter.api.Assertions.assertNotNull;
import static org.junit.jupiter.api.Assertions.assertTrue;

public class ICalConversionTest2 {

    //@Disabled
    @Test
    public void testConvert() {
        String iCalArray = "{\"iCalLink\":null,\"events\":[{\"uid\":\"4e74e5252f733fa139f67ad0cb98af72\",\"summary\":\"Objektorienteeritud programmeerimine - LTAT.03.003\",\"location\":\"Narva mnt 18 - 1008\",\"description\":\"Marina Lepp\\n\\n1.kontrolltÃ¶Ã¶ jÃ¤reltÃ¶Ã¶ \",\"categories\":\"kontrolltÃ¶Ã¶\",\"start\":\"2024-05-29T15:15:00.000Z\",\"end\":\"2024-05-29T17:00:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-05-29T15:15:00.000Z\"]},{\"uid\":\"aaf4aba7f96d014ec55d0e4676f6ad6c\",\"summary\":\"Objektorienteeritud programmeerimine - LTAT.03.003\",\"location\":\"Narva mnt 18 - 2006\",\"description\":\"Marina Lepp\\n\\nKorduseksamieelne 2.kontrolltÃ¶Ã¶ jÃ¤reltÃ¶Ã¶ \",\"categories\":\"kontrolltÃ¶Ã¶\",\"start\":\"2024-06-18T11:15:00.000Z\",\"end\":\"2024-06-18T13:00:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-06-18T11:15:00.000Z\"]},{\"uid\":\"28ddebad856071057095a635a6121218\",\"summary\":\"Arvutilingvistika alused - FLEE.08.122\",\"location\":\"Lossi 3 - 425\",\"description\":\"Kadri Muischnek, Kristiina Vaik\\n\\nEsimeses loengus lepitakse kokku Arvutilingvistika aluste loengute ja/vÃµi praktikumide tÃµstmist teisele ajale. \",\"categories\":\"praktikum\",\"start\":\"2024-02-16T10:15:00.000Z\",\"end\":\"2024-05-17T09:15:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-02-16T10:15:00.000Z\",\"2024-02-23T10:15:00.000Z\",\"2024-03-01T10:15:00.000Z\",\"2024-03-08T10:15:00.000Z\",\"2024-03-15T10:15:00.000Z\",\"2024-03-22T10:15:00.000Z\",\"2024-03-29T10:15:00.000Z\",\"2024-04-05T09:15:00.000Z\",\"2024-04-12T09:15:00.000Z\",\"2024-04-19T09:15:00.000Z\",\"2024-04-26T09:15:00.000Z\",\"2024-05-03T09:15:00.000Z\",\"2024-05-10T09:15:00.000Z\",\"2024-05-17T09:15:00.000Z\"]},{\"uid\":\"4bd24cd931e6410a690ae80765b187af\",\"summary\":\"Objektorienteeritud programmeerimise sÃ¼venduspraktikum - LTAT.03.026\",\"location\":\"Narva mnt 18 - 2047\",\"description\":\"Marina Lepp\",\"categories\":\"praktikum\",\"start\":\"2024-02-15T12:15:00.000Z\",\"end\":\"2024-05-30T11:15:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-02-15T12:15:00.000Z\",\"2024-02-22T12:15:00.000Z\",\"2024-02-29T12:15:00.000Z\",\"2024-03-07T12:15:00.000Z\",\"2024-03-14T12:15:00.000Z\",\"2024-03-21T12:15:00.000Z\",\"2024-03-28T12:15:00.000Z\",\"2024-04-04T11:15:00.000Z\",\"2024-04-11T11:15:00.000Z\",\"2024-04-18T11:15:00.000Z\",\"2024-04-25T11:15:00.000Z\",\"2024-05-02T11:15:00.000Z\",\"2024-05-09T11:15:00.000Z\",\"2024-05-16T11:15:00.000Z\",\"2024-05-23T11:15:00.000Z\",\"2024-05-30T11:15:00.000Z\"]},{\"uid\":\"587b4c3e0c5723b7d73b30f242733d30\",\"summary\":\"Programmeerimine II - LTAT.03.007\",\"location\":\"Narva mnt 18 - 1008\",\"description\":\"Ahti PÃµder\\n\\nRÃ¼hm: 9. rÃ¼hm\",\"categories\":\"praktikum\",\"start\":\"2024-02-16T06:15:00.000Z\",\"end\":\"2024-05-31T05:15:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-02-16T06:15:00.000Z\",\"2024-02-23T06:15:00.000Z\",\"2024-03-01T06:15:00.000Z\",\"2024-03-08T06:15:00.000Z\",\"2024-03-15T06:15:00.000Z\",\"2024-03-22T06:15:00.000Z\",\"2024-03-29T06:15:00.000Z\",\"2024-04-05T05:15:00.000Z\",\"2024-04-12T05:15:00.000Z\",\"2024-04-19T05:15:00.000Z\",\"2024-04-26T05:15:00.000Z\",\"2024-05-03T05:15:00.000Z\",\"2024-05-10T05:15:00.000Z\",\"2024-05-17T05:15:00.000Z\",\"2024-05-24T05:15:00.000Z\",\"2024-05-31T05:15:00.000Z\"]},{\"uid\":\"6c3db754282aba916d21943354100b57\",\"summary\":\"Objektorienteeritud programmeerimine - LTAT.03.003\",\"location\":\"Narva mnt 18 - 2047\",\"description\":\"Marina Lepp\",\"categories\":\"eksam/arvestus\",\"start\":\"2024-06-14T09:15:00.000Z\",\"end\":\"2024-06-14T11:00:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-06-14T09:15:00.000Z\"]},{\"uid\":\"82fd5461aec480d93745886e7dd45eff\",\"summary\":\"Objektorienteeritud programmeerimine - LTAT.03.003\",\"location\":\"Narva mnt 18 - 2047\",\"description\":\"Dmitri Lepp\\n\\nSÃ¼vendusrÃ¼hm\\n\\nRÃ¼hm: 17. rÃ¼hm - sÃ¼vendusrÃ¼hm\",\"categories\":\"praktikum\",\"start\":\"2024-02-15T12:15:00.000Z\",\"end\":\"2024-05-23T11:15:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-02-15T12:15:00.000Z\",\"2024-02-22T12:15:00.000Z\",\"2024-02-29T12:15:00.000Z\",\"2024-03-07T12:15:00.000Z\",\"2024-03-14T12:15:00.000Z\",\"2024-03-21T12:15:00.000Z\",\"2024-03-28T12:15:00.000Z\",\"2024-04-04T11:15:00.000Z\",\"2024-04-11T11:15:00.000Z\",\"2024-04-18T11:15:00.000Z\",\"2024-04-25T11:15:00.000Z\",\"2024-05-02T11:15:00.000Z\",\"2024-05-09T11:15:00.000Z\",\"2024-05-16T11:15:00.000Z\",\"2024-05-23T11:15:00.000Z\"]},{\"uid\":\"ed19b7631d041f8dd8e167aa6ae41861\",\"summary\":\"Objektorienteeritud programmeerimine - LTAT.03.003\",\"location\":\"Narva mnt 18 - 1022\",\"description\":\"Marina Lepp\\n\\n2.kontrolltÃ¶Ã¶ jÃ¤reltÃ¶Ã¶ \",\"categories\":\"kontrolltÃ¶Ã¶\",\"start\":\"2024-05-30T15:15:00.000Z\",\"end\":\"2024-05-30T17:00:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-05-30T15:15:00.000Z\"]},{\"uid\":\"c36ad34fabe707f1c0d6bd65e9a7119a\",\"summary\":\"Sissejuhatus keeleteadusesse II - HVEE.04.025\",\"location\":\"Jakobi 2 - 438\",\"description\":\"Renate Pajusalu\",\"categories\":\"eksam/arvestus\",\"start\":\"2024-06-03T11:15:00.000Z\",\"end\":\"2024-06-03T13:00:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-06-03T11:15:00.000Z\"]},{\"uid\":\"8f1cae9156385a4d31a5d053cb3c3047\",\"summary\":\"Objektorienteeritud programmeerimine - LTAT.03.003\",\"location\":\"Narva mnt 18 - 2004\",\"description\":\"Marina Lepp\\n\\n1.kontrolltÃ¶Ã¶ jÃ¤reltÃ¶Ã¶ \",\"categories\":\"kontrolltÃ¶Ã¶\",\"start\":\"2024-04-18T15:15:00.000Z\",\"end\":\"2024-04-18T17:00:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-04-18T15:15:00.000Z\"]},{\"uid\":\"78feb4caa9358d42f411ed96f50343f3\",\"summary\":\"Arvutilingvistika alused - FLEE.08.122\",\"location\":\"Jakobi 2 - 427\",\"description\":\"Kadri Muischnek\",\"categories\":\"eksam/arvestus\",\"start\":\"2024-05-31T07:15:00.000Z\",\"end\":\"2024-05-31T09:00:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-05-31T07:15:00.000Z\"]},{\"uid\":\"8adb2193fa1d41b6ea969d716c33895d\",\"summary\":\"Programmeerimine II - LTAT.03.007\",\"location\":\"Narva mnt 18 - 1037\",\"description\":\"Ahti PÃµder\\n\\n19.06. toimuvad eksami 1. ja 2. osa. 3. osa toimub 20.06 kell 10-12 ruumis 1037\\n\\n\",\"categories\":\"eksam/arvestus\",\"start\":\"2024-06-19T07:00:00.000Z\",\"end\":\"2024-06-19T11:00:00.000Z\",\"duration\":14400000,\"occurrences\":[\"2024-06-19T07:00:00.000Z\"]},{\"uid\":\"9078ecfe67e46f415314489797033ab6\",\"summary\":\"Arvutilingvistika alused - FLEE.08.122\",\"location\":\"Jakobi 2 - 103\",\"description\":\"Kadri Muischnek, Kristiina Vaik\\n\\nEsimeses loengus lepitakse kokku Arvutilingvistika aluste loengute ja/vÃµi praktikumide tÃµstmist teisele ajale. \",\"categories\":\"loeng\",\"start\":\"2024-05-17T07:15:00.000Z\",\"end\":\"2024-05-17T09:00:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-05-17T07:15:00.000Z\"]},{\"uid\":\"88f58551b7620f283d828c80c603db8e\",\"summary\":\"Objektorienteeritud programmeerimine - LTAT.03.003\",\"location\":\"Narva mnt 18 - 2006\",\"description\":\"Marina Lepp\\n\\nKorduseksamieelne 1.kontrolltÃ¶Ã¶ jÃ¤reltÃ¶Ã¶ \",\"categories\":\"kontrolltÃ¶Ã¶\",\"start\":\"2024-06-17T11:15:00.000Z\",\"end\":\"2024-06-17T13:00:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-06-17T11:15:00.000Z\"]},{\"uid\":\"e80759d5699c0ca654a2c7acd5b3a94b\",\"summary\":\"Objektorienteeritud programmeerimine - LTAT.03.003\",\"location\":\"-\",\"description\":\"Marina Lepp\\n\\nOnline\",\"categories\":\"loeng\",\"start\":\"2024-02-13T10:15:00.000Z\",\"end\":\"2024-05-28T09:15:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-02-13T10:15:00.000Z\",\"2024-02-20T10:15:00.000Z\",\"2024-02-27T10:15:00.000Z\",\"2024-03-05T10:15:00.000Z\",\"2024-03-12T10:15:00.000Z\",\"2024-03-19T10:15:00.000Z\",\"2024-03-26T10:15:00.000Z\",\"2024-04-02T09:15:00.000Z\",\"2024-04-09T09:15:00.000Z\",\"2024-04-16T09:15:00.000Z\",\"2024-04-23T09:15:00.000Z\",\"2024-04-30T09:15:00.000Z\",\"2024-05-07T09:15:00.000Z\",\"2024-05-14T09:15:00.000Z\",\"2024-05-21T09:15:00.000Z\",\"2024-05-28T09:15:00.000Z\"]},{\"uid\":\"cdec94796da3a378710a6574d7e026bc\",\"summary\":\"Objektorienteeritud programmeerimine - LTAT.03.003\",\"location\":\"Narva mnt 18 - 2004\",\"description\":\"Marina Lepp\\n\\n2.kontrolltÃ¶Ã¶ jÃ¤reltÃ¶Ã¶ \",\"categories\":\"kontrolltÃ¶Ã¶\",\"start\":\"2024-05-30T15:15:00.000Z\",\"end\":\"2024-05-30T17:00:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-05-30T15:15:00.000Z\"]},{\"uid\":\"c4cc3db22788a045095f462227a13d69\",\"summary\":\"Programmeerimine II - LTAT.03.007\",\"location\":\"Narva mnt 18 - 1037\",\"description\":\"Ahti PÃµder\",\"categories\":\"loeng\",\"start\":\"2024-02-14T08:15:00.000Z\",\"end\":\"2024-05-29T07:15:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-02-14T08:15:00.000Z\",\"2024-02-21T08:15:00.000Z\",\"2024-02-28T08:15:00.000Z\",\"2024-03-06T08:15:00.000Z\",\"2024-03-13T08:15:00.000Z\",\"2024-03-20T08:15:00.000Z\",\"2024-03-27T08:15:00.000Z\",\"2024-04-03T07:15:00.000Z\",\"2024-04-10T07:15:00.000Z\",\"2024-04-17T07:15:00.000Z\",\"2024-04-24T07:15:00.000Z\",\"2024-05-01T07:15:00.000Z\",\"2024-05-08T07:15:00.000Z\",\"2024-05-15T07:15:00.000Z\",\"2024-05-22T07:15:00.000Z\",\"2024-05-29T07:15:00.000Z\"]},{\"uid\":\"aeb3692c614007a97b7df146fe466d9b\",\"summary\":\"Objektorienteeritud programmeerimine - LTAT.03.003\",\"location\":\"Narva mnt 18 - 1019\",\"description\":\"Jaan Janno\\n\\nlisapraktikum\",\"categories\":\"praktikum\",\"start\":\"2024-02-21T16:15:00.000Z\",\"end\":\"2024-05-29T15:15:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-02-21T16:15:00.000Z\",\"2024-02-28T16:15:00.000Z\",\"2024-03-06T16:15:00.000Z\",\"2024-03-13T16:15:00.000Z\",\"2024-03-20T16:15:00.000Z\",\"2024-03-27T16:15:00.000Z\",\"2024-04-03T15:15:00.000Z\",\"2024-04-10T15:15:00.000Z\",\"2024-04-17T15:15:00.000Z\",\"2024-04-24T15:15:00.000Z\",\"2024-05-01T15:15:00.000Z\",\"2024-05-08T15:15:00.000Z\",\"2024-05-15T15:15:00.000Z\",\"2024-05-22T15:15:00.000Z\",\"2024-05-29T15:15:00.000Z\"]},{\"uid\":\"07f01c6f595a02f424f51336735e922e\",\"summary\":\"Objektorienteeritud programmeerimine - LTAT.03.003\",\"location\":\"Narva mnt 18 - 2006\",\"description\":\"Marina Lepp\\n\\n1.kontrolltÃ¶Ã¶ jÃ¤reltÃ¶Ã¶ \",\"categories\":\"kontrolltÃ¶Ã¶\",\"start\":\"2024-05-29T15:15:00.000Z\",\"end\":\"2024-05-29T17:00:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-05-29T15:15:00.000Z\"]},{\"uid\":\"6f55778bba5a4b981f725bd312307864\",\"summary\":\"Arvutilingvistika alused - FLEE.08.122\",\"location\":\"Jakobi 2 - 412\",\"description\":\"Kristiina Vaik, Kadri Muischnek\\n\\nEsimeses loengus lepitakse kokku Arvutilingvistika aluste loengute ja/vÃµi praktikumide tÃµstmist teisele ajale. \",\"categories\":\"praktikum\",\"start\":\"2024-03-08T10:15:00.000Z\",\"end\":\"2024-03-08T12:00:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-03-08T10:15:00.000Z\"]},{\"uid\":\"bb50d61a6ffd85117f93b7cdeea57108\",\"summary\":\"Objektorienteeritud programmeerimine - LTAT.03.003\",\"location\":\"Narva mnt 18 - 2048\",\"description\":\"Dmitri Lepp\\n\\nsÃ¼vendusrÃ¼hm\",\"categories\":\"loeng\",\"start\":\"2024-02-13T10:15:00.000Z\",\"end\":\"2024-05-28T09:15:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-02-13T10:15:00.000Z\",\"2024-02-20T10:15:00.000Z\",\"2024-02-27T10:15:00.000Z\",\"2024-03-05T10:15:00.000Z\",\"2024-03-12T10:15:00.000Z\",\"2024-03-19T10:15:00.000Z\",\"2024-03-26T10:15:00.000Z\",\"2024-04-02T09:15:00.000Z\",\"2024-04-09T09:15:00.000Z\",\"2024-04-16T09:15:00.000Z\",\"2024-04-23T09:15:00.000Z\",\"2024-04-30T09:15:00.000Z\",\"2024-05-07T09:15:00.000Z\",\"2024-05-14T09:15:00.000Z\",\"2024-05-21T09:15:00.000Z\",\"2024-05-28T09:15:00.000Z\"]},{\"uid\":\"697cd083932728af0ee67d3fcae85591\",\"summary\":\"Tehisintellekt - LTAT.01.003\",\"location\":\"Narva mnt 18 - 1021\",\"description\":\"Mark FiÅ¡el\",\"categories\":\"loeng\",\"start\":\"2024-02-13T12:15:00.000Z\",\"end\":\"2024-05-28T11:15:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-02-13T12:15:00.000Z\",\"2024-02-20T12:15:00.000Z\",\"2024-02-27T12:15:00.000Z\",\"2024-03-05T12:15:00.000Z\",\"2024-03-12T12:15:00.000Z\",\"2024-03-19T12:15:00.000Z\",\"2024-03-26T12:15:00.000Z\",\"2024-04-02T11:15:00.000Z\",\"2024-04-09T11:15:00.000Z\",\"2024-04-16T11:15:00.000Z\",\"2024-04-23T11:15:00.000Z\",\"2024-04-30T11:15:00.000Z\",\"2024-05-07T11:15:00.000Z\",\"2024-05-14T11:15:00.000Z\",\"2024-05-21T11:15:00.000Z\",\"2024-05-28T11:15:00.000Z\"]},{\"uid\":\"03fcf0bd257df3b9304e94203d102605\",\"summary\":\"Objektorienteeritud programmeerimise sÃ¼venduspraktikum - LTAT.03.026\",\"location\":\"Narva mnt 18 - 2048\",\"description\":\"Marina Lepp\",\"categories\":\"loeng\",\"start\":\"2024-02-13T10:15:00.000Z\",\"end\":\"2024-05-28T09:15:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-02-13T10:15:00.000Z\",\"2024-02-20T10:15:00.000Z\",\"2024-02-27T10:15:00.000Z\",\"2024-03-05T10:15:00.000Z\",\"2024-03-12T10:15:00.000Z\",\"2024-03-19T10:15:00.000Z\",\"2024-03-26T10:15:00.000Z\",\"2024-04-02T09:15:00.000Z\",\"2024-04-09T09:15:00.000Z\",\"2024-04-16T09:15:00.000Z\",\"2024-04-23T09:15:00.000Z\",\"2024-04-30T09:15:00.000Z\",\"2024-05-07T09:15:00.000Z\",\"2024-05-14T09:15:00.000Z\",\"2024-05-21T09:15:00.000Z\",\"2024-05-28T09:15:00.000Z\"]},{\"uid\":\"c0644364ff05b53cdad919d4839b4f03\",\"summary\":\"Tehisintellekt - LTAT.01.003\",\"location\":\"Narva mnt 18 - 2045\",\"description\":\"Krista Liin\\n\\nRÃ¼hm: 4. rÃ¼hm\",\"categories\":\"praktikum\",\"start\":\"2024-02-15T10:15:00.000Z\",\"end\":\"2024-05-30T09:15:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-02-15T10:15:00.000Z\",\"2024-02-22T10:15:00.000Z\",\"2024-02-29T10:15:00.000Z\",\"2024-03-07T10:15:00.000Z\",\"2024-03-14T10:15:00.000Z\",\"2024-03-21T10:15:00.000Z\",\"2024-03-28T10:15:00.000Z\",\"2024-04-04T09:15:00.000Z\",\"2024-04-11T09:15:00.000Z\",\"2024-04-18T09:15:00.000Z\",\"2024-04-25T09:15:00.000Z\",\"2024-05-02T09:15:00.000Z\",\"2024-05-09T09:15:00.000Z\",\"2024-05-16T09:15:00.000Z\",\"2024-05-23T09:15:00.000Z\",\"2024-05-30T09:15:00.000Z\"]},{\"uid\":\"d52ae187f6f5f2284696bd87895e39fd\",\"summary\":\"Sissejuhatus keeleteadusesse II - HVEE.04.025\",\"location\":\"Jakobi 2 - 438\",\"description\":\"Renate Pajusalu\",\"categories\":\"loeng\",\"start\":\"2024-02-12T12:15:00.000Z\",\"end\":\"2024-05-13T11:15:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-02-12T12:15:00.000Z\",\"2024-02-19T12:15:00.000Z\",\"2024-02-26T12:15:00.000Z\",\"2024-03-04T12:15:00.000Z\",\"2024-03-11T12:15:00.000Z\",\"2024-03-18T12:15:00.000Z\",\"2024-03-25T12:15:00.000Z\",\"2024-04-01T11:15:00.000Z\",\"2024-04-08T11:15:00.000Z\",\"2024-04-15T11:15:00.000Z\",\"2024-04-22T11:15:00.000Z\",\"2024-04-29T11:15:00.000Z\"]},{\"uid\":\"18b5ac7b97090d28c8ea9b3b48bd1843\",\"summary\":\"Objektorienteeritud programmeerimine - LTAT.03.003\",\"location\":\"Narva mnt 18 - 1008\",\"description\":\"Marina Lepp\\n\\n1.kontrolltÃ¶Ã¶ jÃ¤reltÃ¶Ã¶ \",\"categories\":\"kontrolltÃ¶Ã¶\",\"start\":\"2024-04-18T15:15:00.000Z\",\"end\":\"2024-04-18T17:00:00.000Z\",\"duration\":6300000,\"occurrences\":[\"2024-04-18T15:15:00.000Z\"]}]}";
        iCalObj ical = CalendarDataServlet.convertJson(iCalArray);
        String test = ical.saveToFile();
        System.out.println(test);
        // Asserting that the conversion did not return null
        assertNotNull(ical, "The conversion should not return null");

        // Asserting the size of the JSONArray
        assertTrue(ical != null, "The JSONArray should contain at least one event");

        // Looping through the events and printing them
        /*for (Object event : icals.get("events")) {
            System.out.println(event);
        }*/
    }
}
